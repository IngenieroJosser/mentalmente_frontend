// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  // output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                                  Int                       @id @default(autoincrement())
  usuario                             String        
  correo                              String                    @unique
  genero                              String        
  contrasena                          String        
  createdAt                           DateTime                  @default(now())

  // Relación con las historias clínicas
  medicalRecords                      MedicalRecord[]
}

model MedicalRecord {
  id                                  Int                       @id @default(autoincrement())
  recordNumber                        String                    @unique
  createdAt                           DateTime                  @default(now())
  updatedAt                           DateTime                  @updatedAt

  // Relaciones                       
  userId                              Int                 
  user                                User                      @relation(fields: [userId], references: [id])

  // Información personal del paciente
  patientName                         String
  identificationType                  String
  identificationNumber                String
  birthDate                           DateTime?
  age                                 Int?
  educationLevel                      String?
  occupation                          String?
  birthPlace                          String?
  nationality                         String?
  religion                            String?
  address                             String?
  neighborhood                        String?
  city                                String?
  state                               String?
  admissionDate                       DateTime?
  phone                               String?
  cellPhone                           String?
  email                               String?
  eps                                 String?
  isBeneficiary                       Boolean?
  referredBy                          String?

  // Responsables     
  guardian1Name                       String?
  guardian1Relationship               String?
  guardian1Phone                      String?
  guardian1Occupation                 String?
  guardian2Name                       String?
  guardian2Relationship               String?
  guardian2Phone                      String?
  guardian2Occupation                 String?

  // Atendido por     
  attendedBy                          String?
  licenseNumber                       String?

  // Antecedentes personales      
  personalPathological                String?
  personalSurgical                    String?
  personalPsychopathological          String?
  traumaHistory                       String?
  sleepStatus                         String?
  substanceUse                        String?
  personalOther                       String?

  // Antecedentes familiares      
  familyPathological                  String?
  familySurgical                      String?
  familyPsychopathological            String?
  familyTraumatic                     String?
  familySubstanceUse                  String?
  familyOther                         String?

  // Datos del desarrollo     
  pregnancyInfo                       String?
  deliveryInfo                        String?
  psychomotorDevelopment              String?
  familyDynamics                      String?

  // Información clínica      
  consultationReason                  String?
  problemHistory                      String?
  therapyExpectations                 String?
  mentalExam                          String?
  psychologicalAssessment             String?
  diagnosis                           String?
  therapeuticGoals                    String?
  treatmentPlan                       String?
  referralInfo                        String?
  recommendations                     String?

  // Evolución (campo amplio para registros de seguimiento)
  evolution                           String?
}
